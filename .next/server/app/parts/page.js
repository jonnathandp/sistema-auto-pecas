(()=>{var e={};e.id=206,e.ids=[206],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8863:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>o}),t(562),t(2029),t(5866);var s=t(3191),r=t(8716),i=t(7922),n=t.n(i),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(a,c);let o=["",{children:["parts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,562)),"D:\\sistema-auto-pecas\\src\\app\\parts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"D:\\sistema-auto-pecas\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\sistema-auto-pecas\\src\\app\\parts\\page.tsx"],p="/parts/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/parts/page",pathname:"/parts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},790:(e,a,t)=>{Promise.resolve().then(t.bind(t,5222))},3:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(6557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},5222:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var s=t(326),r=t(7577),i=t(226),n=t(9837),l=t(9175),c=t(2102),o=t(5330),d=t(1223),p=t(3855),x=t(8705),m=t(3),u=t(8091);function h(){let[e,a]=(0,r.useState)([]),[t,h]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[y,v]=(0,r.useState)(null),[b,f]=(0,r.useState)(!0),[w,N]=(0,r.useState)(!1),[k,P]=(0,r.useState)(null),[S,C]=(0,r.useState)({search:"",categoryId:"",supplierId:"",lowStock:!1}),[I,q]=(0,r.useState)({code:"",name:"",description:"",brand:"",model:"",year:"",price:"",costPrice:"",stock:"",minStock:"",location:"",barcode:"",weight:"",dimensions:"",warranty:"",categoryId:"",supplierId:""}),[E,_]=(0,r.useState)({}),z=async()=>{try{let[e,t,s,r]=await Promise.all([fetch(`/api/parts?${new URLSearchParams(S)}`),fetch("/api/categories"),fetch("/api/suppliers"),fetch("/api/auth/me")]);if(e.ok){let t=await e.json();a(t.data)}if(t.ok){let e=await t.json();h(e.data)}if(s.ok){let e=await s.json();j(e.data)}if(r.ok){let e=await r.json();v(e.data)}}catch(e){console.error("Error fetching data:",e)}finally{f(!1)}},A=async e=>{e.preventDefault(),_({});try{let e=k?`/api/parts/${k.id}`:"/api/parts",a=await fetch(e,{method:k?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}),t=await a.json();a.ok?(N(!1),P(null),D(),z()):_({general:t.error||"Erro ao salvar pe\xe7a"})}catch(e){_({general:"Erro de conex\xe3o"})}},M=e=>{P(e),q({code:e.code,name:e.name,description:"",brand:e.brand||"",model:e.model||"",year:"",price:e.price.toString(),costPrice:"",stock:e.stock.toString(),minStock:e.minStock.toString(),location:"",barcode:"",weight:"",dimensions:"",warranty:"",categoryId:(e.category,""),supplierId:(e.supplier,"")}),N(!0)},Z=async e=>{if(confirm("Tem certeza que deseja excluir esta pe\xe7a?"))try{(await fetch(`/api/parts/${e}`,{method:"DELETE"})).ok&&z()}catch(e){console.error("Error deleting part:",e)}},D=()=>{q({code:"",name:"",description:"",brand:"",model:"",year:"",price:"",costPrice:"",stock:"",minStock:"",location:"",barcode:"",weight:"",dimensions:"",warranty:"",categoryId:"",supplierId:""}),_({})},G=e=>{q(a=>({...a,[e.target.name]:e.target.value}))};return b?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsx(i.A,{user:y,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pe\xe7as"}),s.jsx("p",{className:"text-gray-600",children:"Gerencie o cat\xe1logo de pe\xe7as"})]}),(0,s.jsxs)(n.z,{onClick:()=>N(!0),children:[s.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"Nova Pe\xe7a"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(l.I,{placeholder:"Buscar pe\xe7as...",value:S.search,onChange:e=>C(a=>({...a,search:e.target.value}))}),s.jsx(c.P,{options:t.map(e=>({value:e.id,label:e.name})),value:S.categoryId,onChange:e=>C(a=>({...a,categoryId:e.target.value}))}),s.jsx(c.P,{options:g.map(e=>({value:e.id,label:e.name})),value:S.supplierId,onChange:e=>C(a=>({...a,supplierId:e.target.value}))}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"lowStock",checked:S.lowStock,onChange:e=>C(a=>({...a,lowStock:e.target.checked})),className:"mr-2"}),s.jsx("label",{htmlFor:"lowStock",className:"text-sm text-gray-700",children:"Estoque baixo"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pe\xe7a"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pre\xe7o"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{className:"table-row",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(x.Z,{className:"w-8 h-8 text-gray-400 mr-3"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),s.jsx("div",{className:"text-sm text-gray-500",children:e.code}),e.brand&&(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[e.brand," ",e.model]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category?.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,d.xG)(e.price)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:[e.stock," unidades"]}),e.stock<=e.minStock&&s.jsx("div",{className:"text-xs text-red-600",children:"Estoque baixo"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Ativo":"Inativo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[s.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>M(e),children:s.jsx(m.Z,{className:"w-4 h-4"})}),s.jsx(n.z,{variant:"danger",size:"sm",onClick:()=>Z(e.id),children:s.jsx(u.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),s.jsx(o.u,{isOpen:w,onClose:()=>{N(!1),P(null),D()},title:k?"Editar Pe\xe7a":"Nova Pe\xe7a",size:"lg",children:(0,s.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(l.I,{label:"C\xf3digo",name:"code",value:I.code,onChange:G,required:!0,error:E.code}),s.jsx(l.I,{label:"Nome",name:"name",value:I.name,onChange:G,required:!0,error:E.name}),s.jsx(l.I,{label:"Marca",name:"brand",value:I.brand,onChange:G}),s.jsx(l.I,{label:"Modelo",name:"model",value:I.model,onChange:G}),s.jsx(l.I,{label:"Pre\xe7o",name:"price",type:"number",step:"0.01",value:I.price,onChange:G,required:!0,error:E.price}),s.jsx(l.I,{label:"Pre\xe7o de Custo",name:"costPrice",type:"number",step:"0.01",value:I.costPrice,onChange:G}),s.jsx(l.I,{label:"Estoque",name:"stock",type:"number",value:I.stock,onChange:G,required:!0,error:E.stock}),s.jsx(l.I,{label:"Estoque M\xednimo",name:"minStock",type:"number",value:I.minStock,onChange:G,required:!0,error:E.minStock}),s.jsx(c.P,{label:"Categoria",name:"categoryId",options:t.map(e=>({value:e.id,label:e.name})),value:I.categoryId,onChange:G,required:!0,error:E.categoryId}),s.jsx(c.P,{label:"Fornecedor",name:"supplierId",options:g.map(e=>({value:e.id,label:e.name})),value:I.supplierId,onChange:G})]}),E.general&&s.jsx("div",{className:"text-red-600 text-sm",children:E.general}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[s.jsx(n.z,{type:"button",variant:"secondary",onClick:()=>{N(!1),P(null),D()},children:"Cancelar"}),s.jsx(n.z,{type:"submit",children:k?"Atualizar":"Criar"})]})]})})]})})}},2102:(e,a,t)=>{"use strict";t.d(a,{P:()=>i});var s=t(326);t(7577);var r=t(1223);let i=({label:e,error:a,helperText:t,options:i,className:n,id:l,...c})=>{let o=l||e?.toLowerCase().replace(/\s+/g,"-");return(0,s.jsxs)("div",{className:"space-y-1",children:[e&&s.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:e}),(0,s.jsxs)("select",{id:o,className:(0,r.cn)("input-field",a&&"border-red-300 focus:ring-red-500",n),...c,children:[s.jsx("option",{value:"",children:"Selecione..."}),i.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]}),a&&s.jsx("p",{className:"text-sm text-red-600",children:a}),t&&!a&&s.jsx("p",{className:"text-sm text-gray-500",children:t})]})}},562:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`D:\sistema-auto-pecas\src\app\parts\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[276,349,581,795],()=>t(8863));module.exports=s})();