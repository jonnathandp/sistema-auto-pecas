(()=>{var e={};e.id=457,e.ids=[457],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},54567:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>o}),s(86514),s(32029),s(35866);var t=s(23191),r=s(88716),i=s(37922),n=s.n(i),c=s(95231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);s.d(a,l);let o=["",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,86514)),"D:\\sistema-auto-pecas\\src\\app\\categories\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"D:\\sistema-auto-pecas\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\sistema-auto-pecas\\src\\app\\categories\\page.tsx"],m="/categories/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/categories/page",pathname:"/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},85740:(e,a,s)=>{Promise.resolve().then(s.bind(s,93931))},70003:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(76557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},93931:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>u});var t=s(10326),r=s(17577),i=s(226),n=s(99837),c=s(89175),l=s(35330),o=s(51223),d=s(83855);let m=(0,s(76557).Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var x=s(70003),p=s(98091);function u(){let[e,a]=(0,r.useState)([]),[s,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),[j,v]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null),[N,b]=(0,r.useState)({name:"",description:""}),[w,C]=(0,r.useState)({}),P=async()=>{try{let[e,s]=await Promise.all([fetch("/api/categories"),fetch("/api/auth/me")]);if(e.ok){let s=await e.json();a(s.data)}if(s.ok){let e=await s.json();u(e.data)}}catch(e){console.error("Error fetching data:",e)}finally{g(!1)}},k=async e=>{e.preventDefault(),C({});try{let e=y?`/api/categories/${y.id}`:"/api/categories",a=await fetch(e,{method:y?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),s=await a.json();a.ok?(v(!1),f(null),S(),P()):C({general:s.error||"Erro ao salvar categoria"})}catch(e){C({general:"Erro de conex\xe3o"})}},_=e=>{f(e),b({name:e.name,description:e.description||""}),v(!0)},E=async e=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{(await fetch(`/api/categories/${e}`,{method:"DELETE"})).ok&&P()}catch(e){console.error("Error deleting category:",e)}},S=()=>{b({name:"",description:""}),C({})},q=e=>{b(a=>({...a,[e.target.name]:e.target.value}))};return h?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsx(i.A,{user:s,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Categorias"}),t.jsx("p",{className:"text-gray-600",children:"Organize suas pe\xe7as por categorias"})]}),(0,t.jsxs)(n.z,{onClick:()=>v(!0),children:[t.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Nova Categoria"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>t.jsx("div",{className:"bg-white rounded-lg shadow card-hover",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(m,{className:"w-8 h-8 text-primary-600 mr-3"}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e._count.parts," pe\xe7as"]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>_(e),children:t.jsx(x.Z,{className:"w-4 h-4"})}),t.jsx(n.z,{variant:"danger",size:"sm",onClick:()=>E(e.id),disabled:e._count.parts>0,children:t.jsx(p.Z,{className:"w-4 h-4"})})]})]}),e.description&&t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Criado em ",(0,o.p6)(e.createdAt)]})]})},e.id))}),0===e.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(m,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma categoria encontrada"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Comece criando sua primeira categoria de pe\xe7as."}),(0,t.jsxs)(n.z,{onClick:()=>v(!0),children:[t.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Criar Categoria"]})]}),t.jsx(l.u,{isOpen:j,onClose:()=>{v(!1),f(null),S()},title:y?"Editar Categoria":"Nova Categoria",children:(0,t.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[t.jsx(c.I,{label:"Nome",name:"name",value:N.name,onChange:q,required:!0,error:w.name}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o"}),t.jsx("textarea",{name:"description",value:N.description,onChange:q,rows:3,className:"input-field",placeholder:"Descri\xe7\xe3o da categoria (opcional)"}),w.description&&t.jsx("p",{className:"text-sm text-red-600",children:w.description})]}),w.general&&t.jsx("div",{className:"text-red-600 text-sm",children:w.general}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[t.jsx(n.z,{type:"button",variant:"secondary",onClick:()=>{v(!1),f(null),S()},children:"Cancelar"}),t.jsx(n.z,{type:"submit",children:y?"Atualizar":"Criar"})]})]})})]})})}},86514:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`D:\sistema-auto-pecas\src\app\categories\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[276,349,581,795],()=>s(54567));module.exports=t})();