(()=>{var e={};e.id=597,e.ids=[597],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3373:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o}),a(3395),a(2029),a(5866);var r=a(3191),t=a(8716),n=a(7922),l=a.n(n),i=a(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let o=["",{children:["suppliers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3395)),"D:\\sistema-auto-pecas\\src\\app\\suppliers\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"D:\\sistema-auto-pecas\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\sistema-auto-pecas\\src\\app\\suppliers\\page.tsx"],m="/suppliers/page",p={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/suppliers/page",pathname:"/suppliers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9290:(e,s,a)=>{Promise.resolve().then(a.bind(a,2095))},3:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(6557).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},2095:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var r=a(326),t=a(7577),n=a(226),l=a(9837),i=a(9175),c=a(5330),o=a(1223),d=a(3855),m=a(4228),p=a(3),x=a(8091),h=a(6557);let u=(0,h.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),j=(0,h.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),g=(0,h.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);function v(){let[e,s]=(0,t.useState)([]),[a,h]=(0,t.useState)(null),[v,y]=(0,t.useState)(!0),[f,N]=(0,t.useState)(!1),[b,w]=(0,t.useState)(null),[C,P]=(0,t.useState)({name:"",email:"",phone:"",address:"",cnpj:"",contact:""}),[k,_]=(0,t.useState)({}),E=async()=>{try{let[e,a]=await Promise.all([fetch("/api/suppliers"),fetch("/api/auth/me")]);if(e.ok){let a=await e.json();s(a.data)}if(a.ok){let e=await a.json();h(e.data)}}catch(e){console.error("Error fetching data:",e)}finally{y(!1)}},q=async e=>{e.preventDefault(),_({});try{let e=b?`/api/suppliers/${b.id}`:"/api/suppliers",s=await fetch(e,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),a=await s.json();s.ok?(N(!1),w(null),S(),E()):_({general:a.error||"Erro ao salvar fornecedor"})}catch(e){_({general:"Erro de conex\xe3o"})}},Z=e=>{w(e),P({name:e.name,email:e.email||"",phone:e.phone||"",address:e.address||"",cnpj:e.cnpj||"",contact:e.contact||""}),N(!0)},z=async e=>{if(confirm("Tem certeza que deseja excluir este fornecedor?"))try{(await fetch(`/api/suppliers/${e}`,{method:"DELETE"})).ok&&E()}catch(e){console.error("Error deleting supplier:",e)}},S=()=>{P({name:"",email:"",phone:"",address:"",cnpj:"",contact:""}),_({})},A=e=>{P(s=>({...s,[e.target.name]:e.target.value}))};return v?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r.jsx(n.A,{user:a,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fornecedores"}),r.jsx("p",{className:"text-gray-600",children:"Gerencie seus fornecedores de pe\xe7as"})]}),(0,r.jsxs)(l.z,{onClick:()=>N(!0),children:[r.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Novo Fornecedor"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>r.jsx("div",{className:"bg-white rounded-lg shadow card-hover",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(m.Z,{className:"w-8 h-8 text-primary-600 mr-3"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e._count.parts," pe\xe7as"]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>Z(e),children:r.jsx(p.Z,{className:"w-4 h-4"})}),r.jsx(l.z,{variant:"danger",size:"sm",onClick:()=>z(e.id),disabled:e._count.parts>0,children:r.jsx(x.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[e.email&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(u,{className:"w-4 h-4 mr-2"}),e.email]}),e.phone&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(j,{className:"w-4 h-4 mr-2"}),(0,o.CN)(e.phone)]}),e.address&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(g,{className:"w-4 h-4 mr-2"}),e.address]}),e.cnpj&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["CNPJ: ",(0,o.R4)(e.cnpj)]}),e.contact&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Contato: ",e.contact]})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Criado em ",(0,o.p6)(e.createdAt)]})]})},e.id))}),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(m.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum fornecedor encontrado"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Comece cadastrando seu primeiro fornecedor."}),(0,r.jsxs)(l.z,{onClick:()=>N(!0),children:[r.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Cadastrar Fornecedor"]})]}),r.jsx(c.u,{isOpen:f,onClose:()=>{N(!1),w(null),S()},title:b?"Editar Fornecedor":"Novo Fornecedor",size:"lg",children:(0,r.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(i.I,{label:"Nome",name:"name",value:C.name,onChange:A,required:!0,error:k.name}),r.jsx(i.I,{label:"CNPJ",name:"cnpj",value:C.cnpj,onChange:A,error:k.cnpj,helperText:"Apenas n\xfameros"}),r.jsx(i.I,{label:"Email",name:"email",type:"email",value:C.email,onChange:A,error:k.email}),r.jsx(i.I,{label:"Telefone",name:"phone",value:C.phone,onChange:A,error:k.phone}),r.jsx(i.I,{label:"Contato",name:"contact",value:C.contact,onChange:A,error:k.contact,helperText:"Nome da pessoa de contato"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Endere\xe7o"}),r.jsx("textarea",{name:"address",value:C.address,onChange:A,rows:3,className:"input-field",placeholder:"Endere\xe7o completo do fornecedor"}),k.address&&r.jsx("p",{className:"text-sm text-red-600",children:k.address})]}),k.general&&r.jsx("div",{className:"text-red-600 text-sm",children:k.general}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx(l.z,{type:"button",variant:"secondary",onClick:()=>{N(!1),w(null),S()},children:"Cancelar"}),r.jsx(l.z,{type:"submit",children:b?"Atualizar":"Criar"})]})]})})]})})}},3395:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`D:\sistema-auto-pecas\src\app\suppliers\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[276,349,581,795],()=>a(3373));module.exports=r})();