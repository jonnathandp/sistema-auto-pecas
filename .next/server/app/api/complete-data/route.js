"use strict";(()=>{var e={};e.id=682,e.ids=[682],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},12160:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>u,patchFetch:()=>I,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var r={};a.r(r),a.d(r,{POST:()=>n});var o=a(49303),i=a(88716),s=a(60670),d=a(87070);async function n(e){try{let{searchParams:t}=new URL(e.url),r=t.get("secret");if("complete-data-2024"!==r)return d.NextResponse.json({error:"Unauthorized"},{status:401});let{PrismaClient:o}=await Promise.resolve().then(a.t.bind(a,53524,23)),i=new o;console.log("\uD83D\uDE80 Inserindo dados completos...");let s=await i.category.findMany(),n=await i.supplier.findMany();if(0===s.length||0===n.length)return d.NextResponse.json({error:"Execute primeiro o endpoint insert-data para criar categorias e fornecedores"},{status:400});let c=await Promise.all([i.part.create({data:{code:"PC001001",name:"Filtro de \xd3leo",description:"Filtro de \xf3leo para motores 1.0 a 2.0",brand:"Mann Filter",model:"W712/75",price:25.9,costPrice:18.5,stock:50,minStock:10,location:"A1-01",categoryId:s[0].id,supplierId:n[0].id,warranty:12}}),i.part.create({data:{code:"PC001002",name:"Vela de Igni\xe7\xe3o",description:"Vela de igni\xe7\xe3o iridium",brand:"NGK",model:"BKR6EIX",price:45,costPrice:32,stock:30,minStock:5,location:"A1-02",categoryId:s[0].id,supplierId:n[1].id,warranty:24}}),i.part.create({data:{code:"PC002001",name:"Amortecedor Dianteiro",description:"Amortecedor dianteiro direito",brand:"Monroe",model:"G8005",price:180,costPrice:125,stock:20,minStock:3,location:"B2-01",categoryId:s[1].id,supplierId:n[2].id,warranty:12}}),i.part.create({data:{code:"PC003001",name:"Pastilha de Freio",description:"Pastilha de freio dianteira",brand:"Bosch",model:"BP1234",price:85,costPrice:58,stock:40,minStock:8,location:"C1-01",categoryId:s[1].id,supplierId:n[0].id,warranty:12}}),i.part.create({data:{code:"PC004001",name:"Bateria 60Ah",description:"Bateria automotiva 60Ah",brand:"Moura",model:"M60GD",price:280,costPrice:195,stock:18,minStock:3,location:"E1-01",categoryId:s[2].id,supplierId:n[1].id,warranty:18}})]);console.log("✅ Pe\xe7as criadas");let l=await i.user.findUnique({where:{email:"vendedor@autopecas.com"}}),p=await i.user.findUnique({where:{email:"admin@autopecas.com"}}),m=0;if(l&&c.length>=3){let e=await i.sale.create({data:{saleNumber:"SALE-001",customerName:"Carlos Cliente",customerEmail:"carlos@email.com",customerPhone:"(11) 99999-1234",userId:l.id,total:155.9,status:"CONFIRMED",paymentMethod:"PIX"}});await Promise.all([i.saleItem.create({data:{saleId:e.id,partId:c[0].id,quantity:2,price:25.9,total:51.8}}),i.saleItem.create({data:{saleId:e.id,partId:c[3].id,quantity:1,price:85,total:85}})]),m++}if(p&&c.length>=3){let e=await i.sale.create({data:{saleNumber:"SALE-002",customerName:"Maria Motorista",customerEmail:"maria@email.com",customerPhone:"(11) 88888-5678",userId:p.id,total:460,status:"DELIVERED",paymentMethod:"CREDIT_CARD"}});await Promise.all([i.saleItem.create({data:{saleId:e.id,partId:c[2].id,quantity:1,price:180,total:180}}),i.saleItem.create({data:{saleId:e.id,partId:c[4].id,quantity:1,price:280,total:280}})]),m++}for(let e of(console.log("✅ Vendas criadas"),c))await i.stockMovement.create({data:{partId:e.id,type:"IN",quantity:e.stock,reason:"Estoque inicial"}});return console.log("✅ Movimenta\xe7\xf5es de estoque criadas"),await i.$disconnect(),d.NextResponse.json({success:!0,message:"Dados completos inseridos com sucesso!",data:{parts:c.length,sales:m,stockMovements:c.length}})}catch(e){return console.error("Complete data error:",e),d.NextResponse.json({error:"Erro ao inserir dados completos",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/complete-data/route",pathname:"/api/complete-data",filename:"route",bundlePath:"app/api/complete-data/route"},resolvedPagePath:"D:\\sistema-auto-pecas\\src\\app\\api\\complete-data\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:m}=c,u="/api/complete-data/route";function I(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(12160));module.exports=r})();