"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={3524:e=>{e.exports=require("@prisma/client")},8432:e=>{e.exports=require("bcryptjs")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},7317:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var s={};t.r(s),t.d(s,{GET:()=>p,POST:()=>u});var o=t(9303),i=t(8716),a=t(670),n=t(7070);async function u(e){try{let{prisma:r}=await t.e(538).then(t.bind(t,3538)),{verifyPassword:s,generateToken:o}=await Promise.all([t.e(482),t.e(456)]).then(t.bind(t,5456)),{email:i,password:a}=await e.json();if(!i||!a)return n.NextResponse.json({error:"Email e senha s\xe3o obrigat\xf3rios"},{status:400});let u=await r.user.findUnique({where:{email:i}});if(!u||!await s(a,u.password))return n.NextResponse.json({error:"Credenciais inv\xe1lidas"},{status:401});let p=o(u.id),l=n.NextResponse.json({success:!0,data:{user:{id:u.id,email:u.email,name:u.name,role:u.role},token:p}});return l.cookies.set("auth-token",p,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800}),l}catch(e){return console.error("Login error:",e),n.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function p(){return n.NextResponse.json({message:"Login endpoint"})}process.env.DATABASE_URL||console.log("Build time - skipping database operations");let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"D:\\sistema-auto-pecas\\src\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:m}=l,x="/api/auth/login/route";function h(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972],()=>t(7317));module.exports=s})();