"use strict";(()=>{var e={};e.id=710,e.ids=[710],e.modules={53524:e=>{e.exports=require("@prisma/client")},98432:e=>{e.exports=require("bcryptjs")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39103:(e,r,a)=>{a.r(r),a.d(r,{originalPathname:()=>x,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var t={};a.r(t),a.d(t,{POST:()=>u});var o=a(49303),s=a(88716),n=a(60670),i=a(87070),d=a(98432),c=a.n(d);async function u(e){try{let{searchParams:r}=new URL(e.url),t=r.get("secret");if("create-admin-2024"!==t)return i.NextResponse.json({error:"Unauthorized"},{status:401});let{PrismaClient:o}=await Promise.resolve().then(a.t.bind(a,53524,23)),s=new o;try{let e=await c().hash("admin123",10),r=await s.user.upsert({where:{email:"admin@autopecas.com"},update:{password:e,role:"ADMIN"},create:{email:"admin@autopecas.com",name:"Administrador",password:e,role:"ADMIN"}});return await s.$disconnect(),i.NextResponse.json({success:!0,message:"Usu\xe1rio admin criado com sucesso!",user:{id:r.id,email:r.email,name:r.name,role:r.role},credentials:{email:"admin@autopecas.com",password:"admin123"}})}catch(e){return console.error("Database error:",e),i.NextResponse.json({error:"Erro no banco de dados",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}catch(e){return console.error("Admin creation error:",e),i.NextResponse.json({error:"Erro interno do servidor",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/create/route",pathname:"/api/admin/create",filename:"route",bundlePath:"app/api/admin/create/route"},resolvedPagePath:"D:\\sistema-auto-pecas\\src\\app\\api\\admin\\create\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:h}=p,x="/api/admin/create/route";function w(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[276,972],()=>a(39103));module.exports=t})();