(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{6355:function(e,a,s){Promise.resolve().then(s.bind(s,3218))},4630:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3218:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return N}});var r=s(7437),t=s(2265),n=s(3207),c=s(6334),l=s(2827),i=s(3008),d=s(3448),o=s(9397),m=s(340),x=s(4630),h=s(8930),p=s(9763);let j=(0,p.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),u=(0,p.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),f=(0,p.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);function N(){let[e,a]=(0,t.useState)([]),[s,p]=(0,t.useState)(null),[N,g]=(0,t.useState)(!0),[y,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)(null),[C,k]=(0,t.useState)({name:"",email:"",phone:"",address:"",cnpj:"",contact:""}),[E,Z]=(0,t.useState)({});(0,t.useEffect)(()=>{z()},[]);let z=async()=>{try{let[e,s]=await Promise.all([fetch("/api/suppliers"),fetch("/api/auth/me")]);if(e.ok){let s=await e.json();a(s.data)}if(s.ok){let e=await s.json();p(e.data)}}catch(e){console.error("Error fetching data:",e)}finally{g(!1)}},S=async e=>{e.preventDefault(),Z({});try{let e=b?"/api/suppliers/".concat(b.id):"/api/suppliers",a=await fetch(e,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),s=await a.json();a.ok?(v(!1),w(null),_(),z()):Z({general:s.error||"Erro ao salvar fornecedor"})}catch(e){Z({general:"Erro de conex\xe3o"})}},P=e=>{w(e),k({name:e.name,email:e.email||"",phone:e.phone||"",address:e.address||"",cnpj:e.cnpj||"",contact:e.contact||""}),v(!0)},T=async e=>{if(confirm("Tem certeza que deseja excluir este fornecedor?"))try{(await fetch("/api/suppliers/".concat(e),{method:"DELETE"})).ok&&z()}catch(e){console.error("Error deleting supplier:",e)}},_=()=>{k({name:"",email:"",phone:"",address:"",cnpj:"",contact:""}),Z({})},q=e=>{k(a=>({...a,[e.target.name]:e.target.value}))};return N?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,r.jsx)(n.A,{user:s,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Fornecedores"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Gerencie seus fornecedores de pe\xe7as"})]}),(0,r.jsxs)(c.z,{onClick:()=>v(!0),children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Novo Fornecedor"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow card-hover",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(m.Z,{className:"w-8 h-8 text-primary-600 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e._count.parts," pe\xe7as"]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>P(e),children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})}),(0,r.jsx)(c.z,{variant:"danger",size:"sm",onClick:()=>T(e.id),disabled:e._count.parts>0,children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[e.email&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,r.jsx)(j,{className:"w-4 h-4 mr-2"}),e.email]}),e.phone&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,r.jsx)(u,{className:"w-4 h-4 mr-2"}),(0,d.CN)(e.phone)]}),e.address&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,r.jsx)(f,{className:"w-4 h-4 mr-2"}),e.address]}),e.cnpj&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["CNPJ: ",(0,d.R4)(e.cnpj)]}),e.contact&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Contato: ",e.contact]})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Criado em ",(0,d.p6)(e.createdAt)]})]})},e.id))}),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(m.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum fornecedor encontrado"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Comece cadastrando seu primeiro fornecedor."}),(0,r.jsxs)(c.z,{onClick:()=>v(!0),children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Cadastrar Fornecedor"]})]}),(0,r.jsx)(i.u,{isOpen:y,onClose:()=>{v(!1),w(null),_()},title:b?"Editar Fornecedor":"Novo Fornecedor",size:"lg",children:(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(l.I,{label:"Nome",name:"name",value:C.name,onChange:q,required:!0,error:E.name}),(0,r.jsx)(l.I,{label:"CNPJ",name:"cnpj",value:C.cnpj,onChange:q,error:E.cnpj,helperText:"Apenas n\xfameros"}),(0,r.jsx)(l.I,{label:"Email",name:"email",type:"email",value:C.email,onChange:q,error:E.email}),(0,r.jsx)(l.I,{label:"Telefone",name:"phone",value:C.phone,onChange:q,error:E.phone}),(0,r.jsx)(l.I,{label:"Contato",name:"contact",value:C.contact,onChange:q,error:E.contact,helperText:"Nome da pessoa de contato"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Endere\xe7o"}),(0,r.jsx)("textarea",{name:"address",value:C.address,onChange:q,rows:3,className:"input-field",placeholder:"Endere\xe7o completo do fornecedor"}),E.address&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:E.address})]}),E.general&&(0,r.jsx)("div",{className:"text-red-600 text-sm",children:E.general}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(c.z,{type:"button",variant:"secondary",onClick:()=>{v(!1),w(null),_()},children:"Cancelar"}),(0,r.jsx)(c.z,{type:"submit",children:b?"Atualizar":"Criar"})]})]})})]})})}}},function(e){e.O(0,[157,166,971,117,744],function(){return e(e.s=6355)}),_N_E=e.O()}]);