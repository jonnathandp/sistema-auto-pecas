(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{4633:function(e,a,s){Promise.resolve().then(s.bind(s,9770))},4630:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9770:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return u}});var t=s(7437),r=s(2265),i=s(3207),n=s(6334),c=s(2827),l=s(3008),d=s(3448),o=s(9397);let m=(0,s(9763).Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var x=s(4630),h=s(8930);function u(){let[e,a]=(0,r.useState)([]),[s,u]=(0,r.useState)(null),[p,j]=(0,r.useState)(!0),[g,f]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),[v,b]=(0,r.useState)({name:"",description:""}),[w,C]=(0,r.useState)({});(0,r.useEffect)(()=>{k()},[]);let k=async()=>{try{let[e,s]=await Promise.all([fetch("/api/categories"),fetch("/api/auth/me")]);if(e.ok){let s=await e.json();a(s.data)}if(s.ok){let e=await s.json();u(e.data)}}catch(e){console.error("Error fetching data:",e)}finally{j(!1)}},E=async e=>{e.preventDefault(),C({});try{let e=N?"/api/categories/".concat(N.id):"/api/categories",a=await fetch(e,{method:N?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),s=await a.json();a.ok?(f(!1),y(null),Z(),k()):C({general:s.error||"Erro ao salvar categoria"})}catch(e){C({general:"Erro de conex\xe3o"})}},z=e=>{y(e),b({name:e.name,description:e.description||""}),f(!0)},S=async e=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{(await fetch("/api/categories/".concat(e),{method:"DELETE"})).ok&&k()}catch(e){console.error("Error deleting category:",e)}},Z=()=>{b({name:"",description:""}),C({})},_=e=>{b(a=>({...a,[e.target.name]:e.target.value}))};return p?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,t.jsx)(i.A,{user:s,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Categorias"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Organize suas pe\xe7as por categorias"})]}),(0,t.jsxs)(n.z,{onClick:()=>f(!0),children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Nova Categoria"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsx)("div",{className:"bg-white rounded-lg shadow card-hover",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m,{className:"w-8 h-8 text-primary-600 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e._count.parts," pe\xe7as"]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>z(e),children:(0,t.jsx)(x.Z,{className:"w-4 h-4"})}),(0,t.jsx)(n.z,{variant:"danger",size:"sm",onClick:()=>S(e.id),disabled:e._count.parts>0,children:(0,t.jsx)(h.Z,{className:"w-4 h-4"})})]})]}),e.description&&(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Criado em ",(0,d.p6)(e.createdAt)]})]})},e.id))}),0===e.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(m,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma categoria encontrada"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Comece criando sua primeira categoria de pe\xe7as."}),(0,t.jsxs)(n.z,{onClick:()=>f(!0),children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Criar Categoria"]})]}),(0,t.jsx)(l.u,{isOpen:g,onClose:()=>{f(!1),y(null),Z()},title:N?"Editar Categoria":"Nova Categoria",children:(0,t.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,t.jsx)(c.I,{label:"Nome",name:"name",value:v.name,onChange:_,required:!0,error:w.name}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o"}),(0,t.jsx)("textarea",{name:"description",value:v.description,onChange:_,rows:3,className:"input-field",placeholder:"Descri\xe7\xe3o da categoria (opcional)"}),w.description&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:w.description})]}),w.general&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:w.general}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(n.z,{type:"button",variant:"secondary",onClick:()=>{f(!1),y(null),Z()},children:"Cancelar"}),(0,t.jsx)(n.z,{type:"submit",children:N?"Atualizar":"Criar"})]})]})})]})})}}},function(e){e.O(0,[157,166,971,117,744],function(){return e(e.s=4633)}),_N_E=e.O()}]);