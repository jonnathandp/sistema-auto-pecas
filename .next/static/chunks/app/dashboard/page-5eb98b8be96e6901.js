(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9683:function(e,t,s){Promise.resolve().then(s.bind(s,7803))},7803:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),r=s(2265),n=s(3207),l=s(3448),i=s(4794),c=s(6275),d=s(9763);let o=(0,d.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),u=(0,d.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function m(){let[e,t]=(0,r.useState)(null),[s,d]=(0,r.useState)(null),[m,x]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([fetch("/api/dashboard"),fetch("/api/auth/me")]);if(e.ok){let s=await e.json();t(s.data)}if(s.ok){let e=await s.json();d(e.data)}}catch(e){console.error("Error fetching data:",e)}finally{x(!1)}})()},[]),m)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let h=[{name:"Total de Pe\xe7as",value:(null==e?void 0:e.totalParts)||0,icon:i.Z,color:"bg-blue-500"},{name:"Total de Vendas",value:(null==e?void 0:e.totalSales)||0,icon:c.Z,color:"bg-green-500"},{name:"Receita Total",value:(0,l.xG)((null==e?void 0:e.totalRevenue)||0),icon:o,color:"bg-yellow-500"},{name:"Estoque Baixo",value:(null==e?void 0:e.lowStockParts)||0,icon:u,color:"bg-red-500"}];return(0,a.jsx)(n.A,{user:s,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Vis\xe3o geral do sistema"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"".concat(e.color," p-3 rounded-lg"),children:(0,a.jsx)(e.icon,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.name}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]})]})},e.name))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vendas Recentes"})}),(0,a.jsx)("div",{className:"p-6",children:(null==e?void 0:e.recentSales)&&e.recentSales.length>0?(0,a.jsx)("div",{className:"space-y-4",children:e.recentSales.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.customerName||"Cliente n\xe3o informado"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,l.p6)(e.createdAt)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(0,l.xG)(Number(e.total))}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," itens"]})]})]},e.id)})}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma venda encontrada"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Pe\xe7as Mais Vendidas"})}),(0,a.jsx)("div",{className:"p-6",children:(null==e?void 0:e.topSellingParts)&&e.topSellingParts.length>0?(0,a.jsx)("div",{className:"space-y-4",children:e.topSellingParts.map((e,t)=>{var s,r,n;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(null===(s=e.part)||void 0===s?void 0:s.name)||"Pe\xe7a n\xe3o encontrada"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null===(r=e.part)||void 0===r?void 0:r.code})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[e.totalSold," vendidas"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,l.xG)(Number(e.revenue))})]})]},(null===(n=e.part)||void 0===n?void 0:n.id)||t)})}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma venda encontrada"})})]})]})]})})}},3207:function(e,t,s){"use strict";s.d(t,{A:function(){return b}});var a=s(7437),r=s(2265),n=s(7648),l=s(9376),i=s(3448),c=s(9637),d=s(4794),o=s(6275),u=s(5805),m=s(340),x=s(6221),h=s(8728),g=s(7692);let f=[{name:"Dashboard",href:"/dashboard",icon:c.Z},{name:"Pe\xe7as",href:"/parts",icon:d.Z},{name:"Vendas",href:"/sales",icon:o.Z},{name:"Categorias",href:"/categories",icon:u.Z},{name:"Fornecedores",href:"/suppliers",icon:m.Z},{name:"Relat\xf3rios",href:"/reports",icon:x.Z},{name:"Configura\xe7\xf5es",href:"/settings",icon:h.Z}],p=e=>{let{isOpen:t,onClose:s}=e,r=(0,l.usePathname)(),c=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),window.location.href="/login"}catch(e){console.error("Logout error:",e)}};return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:s}),(0,a.jsx)("div",{className:(0,i.cn)("fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",t?"translate-x-0":"-translate-x-full"),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-16 px-4 bg-primary-600",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"AutoPe\xe7as"})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:f.map(e=>{let t=r===e.href;return(0,a.jsxs)(n.default,{href:e.href,className:(0,i.cn)("flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",t?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),onClick:s,children:[(0,a.jsx)(e.icon,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsxs)("button",{onClick:c,className:"flex items-center w-full px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 mr-3"}),"Sair"]})})]})})]})};var N=s(8293),j=s(4766),v=s(2369);let y=e=>{let{onMenuClick:t,user:s}=e;return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:t,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 lg:hidden",children:(0,a.jsx)(N.Z,{size:20})}),(0,a.jsx)("h2",{className:"ml-4 text-lg font-semibold text-gray-900 lg:ml-0",children:"Sistema de Auto Pe\xe7as"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 relative",children:[(0,a.jsx)(j.Z,{size:20}),(0,a.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"hidden sm:block text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==s?void 0:s.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null==s?void 0:s.email})]}),(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(v.Z,{size:16,className:"text-white"})})]})]})]})})},b=e=>{let{children:t,user:s}=e,[n,l]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(p,{isOpen:n,onClose:()=>l(!1)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(y,{onMenuClick:()=>l(!0),user:s}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}},3448:function(e,t,s){"use strict";s.d(t,{CN:function(){return d},R4:function(){return c},cn:function(){return r},li:function(){return u},o0:function(){return i},p6:function(){return l},vw:function(){return m},xG:function(){return n},z2:function(){return o}});var a=s(1994);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.W)(t)}function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function l(e){return new Intl.DateTimeFormat("pt-BR").format(new Date(e))}function i(e){return new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}function c(e){return(e=e.replace(/[^\d]/g,"")).replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5")}function d(e){return 11===(e=e.replace(/[^\d]/g,"")).length?e.replace(/^(\d{2})(\d{5})(\d{4})$/,"($1) $2-$3"):10===e.length?e.replace(/^(\d{2})(\d{4})(\d{4})$/,"($1) $2-$3"):e}function o(e){switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function u(e){switch(e){case"PENDING":return"Pendente";case"CONFIRMED":return"Confirmado";case"DELIVERED":return"Entregue";case"CANCELLED":return"Cancelado";default:return e}}function m(e){switch(e){case"CASH":return"Dinheiro";case"CREDIT_CARD":return"Cart\xe3o de Cr\xe9dito";case"DEBIT_CARD":return"Cart\xe3o de D\xe9bito";case"PIX":return"PIX";case"BANK_TRANSFER":return"Transfer\xeancia";case"CHECK":return"Cheque";default:return e}}}},function(e){e.O(0,[157,971,117,744],function(){return e(e.s=9683)}),_N_E=e.O()}]);